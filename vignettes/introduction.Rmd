---
title: "Introduction to SurveyStat"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Introduction to SurveyStat}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(SurveyStat)
library(dplyr)
```

## What is SurveyStat?

SurveyStat makes it easy to analyze survey data in R. Whether you're working with customer satisfaction surveys, social research, or market research data, this package helps you get insights quickly and accurately.

The package handles the complexities of survey analysis for you - things like sampling weights, grouped comparisons, and missing data are all taken care of automatically.

## Getting Started

Let's start with a simple example. We'll use the included survey data which contains responses from 2,500 people about their life satisfaction, demographics, and opinions.

```{r}
# Load the example survey data
data(survey_data)

# Take a quick look at what we have
glimpse(survey_data)
```

## Understanding Your Data

### Getting Summary Statistics

Want to know the average age or income in your survey? The `describe()` function gives you a complete summary:

```{r}
# Get a summary of age and income
# The weights ensure results represent the population correctly
survey_data %>%
  describe(age, income, weights = sampling_weight)
```

This shows you:
- **Mean**: The average value
- **Median**: The middle value when sorted
- **SD**: How spread out the values are
- **Range**: The minimum and maximum values

### Looking at Categories

For questions with categories (like education level or region), use `frequency()` to see how many people chose each option:

```{r}
# See the breakdown of education levels and regions
survey_data %>%
  frequency(education, region, weights = sampling_weight)
```

## Comparing Groups

One of the most common tasks in survey analysis is comparing different groups. Let's see if men and women differ in their life satisfaction scores.

### Simple Group Comparison

```{r}
# Compare life satisfaction between men and women
survey_data %>%
  t_test(life_satisfaction, group = gender, weights = sampling_weight)
```

The results tell you:
- The average for each group
- Whether the difference is statistically significant (look for the stars!)
- The p-value (smaller values mean stronger evidence of a difference)

### Comparing Across Multiple Groups

What if you have more than two groups? Use ANOVA to compare education levels:

```{r}
# Compare life satisfaction across education levels
result <- survey_data %>%
  oneway_anova(life_satisfaction, group = education, weights = sampling_weight)

# See which specific groups differ from each other
result %>% tukey_test()
```

## Looking at Relationships

Sometimes you want to know if two things are related. For example, are older people more satisfied with life?

### Correlation Analysis

```{r}
# Check if age and life satisfaction are related
survey_data %>%
  pearson_cor(age, life_satisfaction, weights = sampling_weight)
```

The correlation value ranges from -1 to 1:
- Values close to 1: Strong positive relationship (as one goes up, so does the other)
- Values close to 0: No relationship
- Values close to -1: Strong negative relationship (as one goes up, the other goes down)

### When Your Data Isn't Normal

If your data is skewed or has outliers, use rank-based correlations instead:

```{r}
# Spearman correlation is more robust to outliers
survey_data %>%
  spearman_rho(age, life_satisfaction, weights = sampling_weight)

# Kendall's tau is good for ordinal data (like rating scales)
survey_data %>%
  kendall_tau(political_orientation, trust_government, weights = sampling_weight)
```

## Regional Differences

Want to run the same analysis for different regions? Just group your data:

```{r}
# Compare gender differences within each region
survey_data %>%
  group_by(region) %>%
  t_test(life_satisfaction, group = gender, weights = sampling_weight)
```

This automatically runs the comparison separately for each region.

## Understanding Survey Weights

Survey weights ensure your results represent the actual population. For example, if young people were less likely to respond to your survey, their responses get more weight to compensate.

Always use weights when they're provided:

```{r}
# Without weights (biased)
survey_data %>%
  describe(age)

# With weights (representative)
survey_data %>%
  describe(age, weights = sampling_weight)
```

## What the Stars Mean

Throughout the results, you'll see significance stars:
- `***` means p < 0.001 (very strong evidence)
- `**` means p < 0.01 (strong evidence)
- `*` means p < 0.05 (moderate evidence)
- No stars means the result isn't statistically significant

## Tips for Success

1. **Always use weights** when analyzing survey data to get accurate population estimates
2. **Check your data first** with `describe()` and `frequency()` before running tests
3. **Use appropriate tests**: t-tests for two groups, ANOVA for multiple groups
4. **Consider your data type**: Use Spearman or Kendall for ordinal data or when you have outliers
5. **Look at effect sizes**, not just p-values, to understand practical significance

## Getting Help

For questions and bug reports, please visit our [GitHub repository](https://github.com/yourusername/SurveyStat).