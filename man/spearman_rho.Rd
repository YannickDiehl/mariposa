% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spearman_rho.R
\name{spearman_rho}
\alias{spearman_rho}
\title{Spearman's Rank Correlation Analysis}
\usage{
spearman_rho(
  data,
  ...,
  weights = NULL,
  alternative = "two.sided",
  na.rm = "pairwise"
)
}
\arguments{
\item{data}{A data frame or tibble containing the variables to analyze}

\item{...}{\if{html}{\out{<\code{\link[dplyr]{dplyr_tidy_select}}>}} Variables for correlation analysis.
Supports all tidyselect helpers. If more than two variables are selected,
a correlation matrix is computed.}

\item{weights}{\if{html}{\out{<\code{\link[dplyr]{dplyr_data_masking}}>}} Optional sampling weights
for weighted correlations. Should be a numeric variable with positive values.
Note: SPSS may not apply weights to Spearman's rho; our implementation uses
weighted ranks for mathematically correct survey analysis.}

\item{alternative}{Character string specifying the alternative hypothesis:
\itemize{
\item \code{"two.sided"} (default): Two-tailed test
\item \code{"less"}: One-tailed test (negative correlation)
\item \code{"greater"}: One-tailed test (positive correlation)
}}

\item{na.rm}{Character string specifying missing data handling:
\itemize{
\item \code{"pairwise"} (default): Pairwise deletion - each correlation uses all available cases
\item \code{"listwise"}: Listwise deletion - only complete cases across all variables
}}
}
\value{
An object of class \code{"spearman_rho_results"} containing:
\describe{
\item{correlations}{Data frame with rho coefficients, p-values, and t-statistics}
\item{n_obs}{Matrix of sample sizes for each correlation}
\item{variables}{Character vector of analyzed variable names}
\item{weights}{Name of the weights variable (if used)}
\item{alternative}{Alternative hypothesis used}
\item{is_grouped}{Logical indicating if data was grouped via group_by()}
\item{groups}{Grouping variables (if any)}
\item{matrices}{List of correlation, p-value, and sample size matrices}
}
}
\description{
Calculates Spearman's rank correlation coefficients (rho) between variables with support
for weighted correlations, grouped data, and multiple variable pairs. Provides
significance testing and SPSS-compatible output formatting.

Spearman's rho is a non-parametric measure of rank correlation that assesses monotonic
relationships between variables. It is particularly suitable for ordinal data or when
the assumptions of Pearson correlation are not met.
}
\details{
\subsection{What Spearman's Rho Measures}{

Spearman's rho measures the strength and direction of a monotonic relationship between
two variables. Unlike Pearson correlation, it doesn't require a linear relationship -
it just needs one variable to consistently increase (or decrease) as the other increases.

Think of it as ranking your data first, then checking if the ranks tend to go together.
}

\subsection{Interpreting Results}{

The rho value ranges from -1 to +1:
\itemize{
\item \strong{Strong positive} (0.7 to 1.0): High ranks in one variable go with high ranks in the other
\item \strong{Moderate positive} (0.3 to 0.7): Moderate tendency for ranks to increase together
\item \strong{Weak positive} (0 to 0.3): Slight tendency for ranks to increase together
\item \strong{No correlation} (near 0): No relationship between the variables
\item \strong{Negative values}: As one variable's rank increases, the other's tends to decrease
}
}

\subsection{When to Use Spearman's Rho}{

Choose Spearman's rho when:
\itemize{
\item Your relationship is monotonic but not necessarily linear
\item Your data has outliers (they have less impact on ranks)
\item Your variables are ordinal (ordered categories)
\item You're not sure if your data meets Pearson correlation assumptions
\item You want to detect any monotonic trend, not just linear ones
}
}

\subsection{Spearman vs. Kendall}{
\itemize{
\item \strong{Spearman's rho} is usually larger in magnitude than Kendall's tau
\item \strong{Spearman's rho} is better for detecting linear relationships in ranks
\item \strong{Kendall's tau} is more robust and has better statistical properties
\item \strong{Spearman's rho} is more commonly reported in research
}
}

\subsection{Understanding the Output}{

The function provides:
\itemize{
\item \strong{rho}: The rank correlation coefficient
\item \strong{p-value}: Probability of seeing this correlation by chance
\item \strong{n}: Number of observation pairs used
\item \strong{significance stars}: Visual indicator (*** very strong, ** strong, * moderate evidence)
}
}
}
\examples{
# Load required packages and data
library(dplyr)
data(survey_data)

# Basic correlation between two variables
survey_data \%>\%
  spearman_rho(life_satisfaction, political_orientation)

# Correlation matrix for multiple variables
survey_data \%>\%
  spearman_rho(life_satisfaction, political_orientation, trust_media)

# Weighted correlations (mathematically correct, though SPSS may not apply weights)
survey_data \%>\%
  spearman_rho(age, income, weights = sampling_weight)

# Grouped correlations
survey_data \%>\%
  group_by(region) \%>\%
  spearman_rho(age, income, life_satisfaction)

# Using tidyselect helpers
survey_data \%>\%
  spearman_rho(starts_with("trust"), weights = sampling_weight)

# Listwise deletion for missing data
survey_data \%>\%
  spearman_rho(age, income, na.rm = "listwise")

# One-tailed test
survey_data \%>\%
  spearman_rho(age, income, alternative = "greater")

}
\references{
Spearman, C. (1904). The proof and measurement of association between two things.
American Journal of Psychology, 15(1), 72-101.

Lehmann, E.L. (1975). Nonparametrics: Statistical Methods Based on Ranks. Holden-Day.
}
\seealso{
\code{\link[stats]{cor}} with method="spearman" for base R implementation
\code{\link[stats]{cor.test}} with method="spearman" for significance testing
\code{\link{kendall_tau}} for Kendall's rank correlation
\code{\link{pearson_cor}} for Pearson correlation analysis
}
