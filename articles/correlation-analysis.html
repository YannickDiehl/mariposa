<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Understanding Relationships: Correlation Analysis • mariposa</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Understanding Relationships: Correlation Analysis">
<link rel="stylesheet" href="extra.css">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mariposa</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-vignettes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Vignettes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-vignettes">
<li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction to mariposa</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Core Functions</h6></li>
    <li><a class="dropdown-item" href="../articles/descriptive-statistics.html">Descriptive Statistics and Frequencies</a></li>
    <li><a class="dropdown-item" href="../articles/hypothesis-testing.html">Comparing Groups and Testing Hypotheses</a></li>
    <li><a class="dropdown-item" href="../articles/correlation-analysis.html">Understanding Relationships: Correlation Analysis</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Advanced Topics</h6></li>
    <li><a class="dropdown-item" href="../articles/survey-weights.html">Working with Survey Weights</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/YannickDiehl/mariposa" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Understanding Relationships: Correlation Analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/YannickDiehl/mariposa/blob/main/vignettes/correlation-analysis.Rmd" class="external-link"><code>vignettes/correlation-analysis.Rmd</code></a></small>
      <div class="d-none name"><code>correlation-analysis.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/YannickDiehl/mariposa" class="external-link">mariposa</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'mariposa'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     frequency</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     gamma</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">survey_data</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="what-is-correlation">What is Correlation?<a class="anchor" aria-label="anchor" href="#what-is-correlation"></a>
</h2>
<p>Correlation measures how two variables are related. When one goes up,
does the other tend to go up (positive correlation) or down (negative
correlation)?</p>
<p>mariposa provides three correlation methods: -
<strong>Pearson</strong>: For linear relationships between continuous
variables - <strong>Spearman</strong>: For monotonic relationships
(doesn’t have to be linear) - <strong>Kendall</strong>: For ordinal data
or when you have many ties</p>
</div>
<div class="section level2">
<h2 id="pearson-correlation">Pearson Correlation<a class="anchor" aria-label="anchor" href="#pearson-correlation"></a>
</h2>
<div class="section level3">
<h3 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h3>
<p>Measure linear correlation between age and income:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pearson Correlation </span></span>
<span><span class="co">#&gt; -------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.007</span></span>
<span><span class="co">#&gt;   Effect size: r² = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 2186</span></span>
<span><span class="co">#&gt;   95% CI: [-0.048, 0.035]</span></span>
<span><span class="co">#&gt;   p-value: 0.7608</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
<p>Interpretation: - <strong>r = 1</strong>: Perfect positive
correlation - <strong>r = 0</strong>: No linear relationship - <strong>r
= -1</strong>: Perfect negative correlation</p>
</div>
<div class="section level3">
<h3 id="with-survey-weights">With Survey Weights<a class="anchor" aria-label="anchor" href="#with-survey-weights"></a>
</h3>
<p>Get population-representative correlations:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.005</span></span>
<span><span class="co">#&gt;   Effect size: r² = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 2201</span></span>
<span><span class="co">#&gt;   95% CI: [-0.046, 0.037]</span></span>
<span><span class="co">#&gt;   p-value: 0.8276</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiple-variables">Multiple Variables<a class="anchor" aria-label="anchor" href="#multiple-variables"></a>
</h3>
<p>Create a correlation matrix:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Correlate all trust variables</span></span>
<span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">trust_government</span>, <span class="va">trust_media</span>, <span class="va">trust_science</span>,</span>
<span>              weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                  trust_government trust_media trust_science</span></span>
<span><span class="co">#&gt; trust_government            1.000       0.012         0.031</span></span>
<span><span class="co">#&gt; trust_media                 0.012       1.000         0.024</span></span>
<span><span class="co">#&gt; trust_science               0.031       0.024         1.000</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Significance Matrix (p-values):</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt;                  trust_government trust_media trust_science</span></span>
<span><span class="co">#&gt; trust_government           0.0000      0.5823        0.1452</span></span>
<span><span class="co">#&gt; trust_media                0.5823      0.0000        0.2586</span></span>
<span><span class="co">#&gt; trust_science              0.1452      0.2586        0.0000</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                  trust_government trust_media trust_science</span></span>
<span><span class="co">#&gt; trust_government             2371        2242          2271</span></span>
<span><span class="co">#&gt; trust_media                  2242        2382          2286</span></span>
<span><span class="co">#&gt; trust_science                2271        2286          2414</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pairwise Results:</span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt;                     Variable_Pair     r r_squared p_value           CI_95    n</span></span>
<span><span class="co">#&gt;    trust_government × trust_media 0.012     0.000  0.5823 [-0.030, 0.053] 2242</span></span>
<span><span class="co">#&gt;  trust_government × trust_science 0.031     0.001  0.1452 [-0.011, 0.072] 2271</span></span>
<span><span class="co">#&gt;       trust_media × trust_science 0.024     0.001  0.2586 [-0.017, 0.065] 2286</span></span>
<span><span class="co">#&gt;  sig</span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt;     </span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="grouped-analysis">Grouped Analysis<a class="anchor" aria-label="anchor" href="#grouped-analysis"></a>
</h3>
<p>Calculate correlations within groups:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: region = East</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = 0.050</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.002</span></span>
<span><span class="co">#&gt;   Sample size: n = 449</span></span>
<span><span class="co">#&gt;   95% CI: [-0.043, 0.142]</span></span>
<span><span class="co">#&gt;   p-value: 0.2931</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: region = West</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.019</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 1751</span></span>
<span><span class="co">#&gt;   95% CI: [-0.066, 0.028]</span></span>
<span><span class="co">#&gt;   p-value: 0.4267</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="with-confidence-intervals">With Confidence Intervals<a class="anchor" aria-label="anchor" href="#with-confidence-intervals"></a>
</h3>
<p>Get confidence intervals for correlations:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>,</span>
<span>              conf.level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>              weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.005</span></span>
<span><span class="co">#&gt;   Effect size: r² = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 2201</span></span>
<span><span class="co">#&gt;   95% CI: [-0.046, 0.037]</span></span>
<span><span class="co">#&gt;   p-value: 0.8276</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="spearman-correlation">Spearman Correlation<a class="anchor" aria-label="anchor" href="#spearman-correlation"></a>
</h2>
<div class="section level3">
<h3 id="when-to-use">When to Use<a class="anchor" aria-label="anchor" href="#when-to-use"></a>
</h3>
<p>Use Spearman when: - Relationship is monotonic but not linear - Data
contains outliers - Variables are ordinal</p>
</div>
<div class="section level3">
<h3 id="basic-usage-1">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage-1"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Correlation between ordinal variables</span></span>
<span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/spearman_rho.html">spearman_rho</a></span><span class="op">(</span><span class="va">political_orientation</span>, <span class="va">environmental_concern</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Spearman's Rank Correlation Analysis  </span></span>
<span><span class="co">#&gt; ══════════════════════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; Method: Spearman's rho (rank correlation)</span></span>
<span><span class="co">#&gt; Variables: political_orientation, environmental_concern</span></span>
<span><span class="co">#&gt; Alternative hypothesis: two.sided</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ┌─ political_orientation × environmental_concern ─┐</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Spearman's rho: ρ = -0.576</span></span>
<span><span class="co">#&gt;   Sample size: n = 2207</span></span>
<span><span class="co">#&gt;   t-statistic: -33.093</span></span>
<span><span class="co">#&gt;   p-value (2-tailed): 0.0000</span></span>
<span><span class="co">#&gt;   Significance: ***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Interpretation: moderate negative monotonic relationship</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="with-weights">With Weights<a class="anchor" aria-label="anchor" href="#with-weights"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/spearman_rho.html">spearman_rho</a></span><span class="op">(</span><span class="va">political_orientation</span>, <span class="va">environmental_concern</span>,</span>
<span>               weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Spearman's Rank Correlation Analysis  </span></span>
<span><span class="co">#&gt; ══════════════════════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; Method: Spearman's rho (rank correlation)</span></span>
<span><span class="co">#&gt; Variables: political_orientation, environmental_concern</span></span>
<span><span class="co">#&gt; Weights: sampling_weight</span></span>
<span><span class="co">#&gt; Alternative hypothesis: two.sided</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ┌─ political_orientation × environmental_concern ─┐</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Spearman's rho: ρ = -0.576</span></span>
<span><span class="co">#&gt;   Sample size: n = 2207</span></span>
<span><span class="co">#&gt;   t-statistic: -33.093</span></span>
<span><span class="co">#&gt;   p-value (2-tailed): 0.0000</span></span>
<span><span class="co">#&gt;   Significance: ***</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Interpretation: moderate negative monotonic relationship</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="multiple-variables-1">Multiple Variables<a class="anchor" aria-label="anchor" href="#multiple-variables-1"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create rank correlation matrix</span></span>
<span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/spearman_rho.html">spearman_rho</a></span><span class="op">(</span><span class="va">political_orientation</span>, <span class="va">environmental_concern</span>,</span>
<span>               <span class="va">life_satisfaction</span>, <span class="va">trust_government</span>,</span>
<span>               weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Spearman's Rank Correlation Analysis  </span></span>
<span><span class="co">#&gt; ══════════════════════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; Method: Spearman's rho (rank correlation)</span></span>
<span><span class="co">#&gt; Variables: political_orientation, environmental_concern, life_satisfaction, trust_government</span></span>
<span><span class="co">#&gt; Weights: sampling_weight</span></span>
<span><span class="co">#&gt; Alternative hypothesis: two.sided</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Spearman's Rho Matrix:</span></span>
<span><span class="co">#&gt; ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;               Variable political_orientation environmental_concern</span></span>
<span><span class="co">#&gt;  political_orientation                 1.000                -0.576</span></span>
<span><span class="co">#&gt;  environmental_concern                -0.576                 1.000</span></span>
<span><span class="co">#&gt;      life_satisfaction                -0.004                 0.003</span></span>
<span><span class="co">#&gt;       trust_government                -0.055                 0.067</span></span>
<span><span class="co">#&gt;  life_satisfaction trust_government</span></span>
<span><span class="co">#&gt;             -0.004           -0.055</span></span>
<span><span class="co">#&gt;              0.003            0.067</span></span>
<span><span class="co">#&gt;              1.000            0.002</span></span>
<span><span class="co">#&gt;              0.002            1.000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Significance Matrix (p-values, 2-tailed):</span></span>
<span><span class="co">#&gt; ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;               Variable political_orientation environmental_concern</span></span>
<span><span class="co">#&gt;  political_orientation                   -                  0.0000</span></span>
<span><span class="co">#&gt;  environmental_concern                0.0000                   -  </span></span>
<span><span class="co">#&gt;      life_satisfaction                0.8334                0.9041</span></span>
<span><span class="co">#&gt;       trust_government                0.0110                0.0015</span></span>
<span><span class="co">#&gt;  life_satisfaction trust_government</span></span>
<span><span class="co">#&gt;             0.8334           0.0110</span></span>
<span><span class="co">#&gt;             0.9041           0.0015</span></span>
<span><span class="co">#&gt;                -             0.9425</span></span>
<span><span class="co">#&gt;             0.9425              -  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size Matrix:</span></span>
<span><span class="co">#&gt; ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;               Variable political_orientation environmental_concern</span></span>
<span><span class="co">#&gt;  political_orientation                  2299                  2207</span></span>
<span><span class="co">#&gt;  environmental_concern                  2207                  2400</span></span>
<span><span class="co">#&gt;      life_satisfaction                  2228                  2324</span></span>
<span><span class="co">#&gt;       trust_government                  2168                  2260</span></span>
<span><span class="co">#&gt;  life_satisfaction trust_government</span></span>
<span><span class="co">#&gt;               2228             2168</span></span>
<span><span class="co">#&gt;               2324             2260</span></span>
<span><span class="co">#&gt;               2421             2280</span></span>
<span><span class="co">#&gt;               2280             2354</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pairwise Results:</span></span>
<span><span class="co">#&gt; ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt;                                           Pair    rho       t      p    n sig</span></span>
<span><span class="co">#&gt;  political_orientation × environmental_concern -0.576 -33.093 0.0000 2207 ***</span></span>
<span><span class="co">#&gt;      political_orientation × life_satisfaction -0.004  -0.210 0.8334 2228    </span></span>
<span><span class="co">#&gt;       political_orientation × trust_government -0.055  -2.545 0.0110 2168   *</span></span>
<span><span class="co">#&gt;      environmental_concern × life_satisfaction  0.003   0.121 0.9041 2324    </span></span>
<span><span class="co">#&gt;       environmental_concern × trust_government  0.067   3.175 0.0015 2260  **</span></span>
<span><span class="co">#&gt;           life_satisfaction × trust_government  0.002   0.072 0.9425 2280    </span></span>
<span><span class="co">#&gt; ─────────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="kendalls-tau">Kendall’s Tau<a class="anchor" aria-label="anchor" href="#kendalls-tau"></a>
</h2>
<div class="section level3">
<h3 id="when-to-use-1">When to Use<a class="anchor" aria-label="anchor" href="#when-to-use-1"></a>
</h3>
<p>Use Kendall when: - Data is ordinal - Sample size is small - Many
tied values exist</p>
</div>
<div class="section level3">
<h3 id="basic-usage-2">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage-2"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/kendall_tau.html">kendall_tau</a></span><span class="op">(</span><span class="va">political_orientation</span>, <span class="va">life_satisfaction</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Kendall's Tau-b Correlation </span></span>
<span><span class="co">#&gt; ---------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Alternative hypothesis: two.sided</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ┌─ political_orientation × life_satisfaction ─┐</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Kendall's tau-b: τ = -0.004</span></span>
<span><span class="co">#&gt;   Sample size: n = 2228</span></span>
<span><span class="co">#&gt;   z-score: -0.212</span></span>
<span><span class="co">#&gt;   p-value (2-tailed): 0.8321</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Interpretation: weak negative correlation</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="with-weights-1">With Weights<a class="anchor" aria-label="anchor" href="#with-weights-1"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/kendall_tau.html">kendall_tau</a></span><span class="op">(</span><span class="va">political_orientation</span>, <span class="va">life_satisfaction</span>,</span>
<span>              weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Kendall's Tau-b Correlation </span></span>
<span><span class="co">#&gt; ------------------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Alternative hypothesis: two.sided</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ┌─ political_orientation × life_satisfaction ─┐</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Kendall's tau-b: τ = -0.004</span></span>
<span><span class="co">#&gt;   Sample size: n = 2241</span></span>
<span><span class="co">#&gt;   z-score: -0.298</span></span>
<span><span class="co">#&gt;   p-value (2-tailed): 0.7659</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Interpretation: weak negative correlation</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="interpreting-correlations">Interpreting Correlations<a class="anchor" aria-label="anchor" href="#interpreting-correlations"></a>
</h2>
<div class="section level3">
<h3 id="strength-guidelines">Strength Guidelines<a class="anchor" aria-label="anchor" href="#strength-guidelines"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Correlation</th>
<th>Interpretation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>0.0 - 0.3</td>
<td>Weak</td>
</tr>
<tr class="even">
<td>0.3 - 0.7</td>
<td>Moderate</td>
</tr>
<tr class="odd">
<td>0.7 - 1.0</td>
<td>Strong</td>
</tr>
</tbody>
</table>
<p>Remember: These are rough guidelines. Context matters!</p>
</div>
<div class="section level3">
<h3 id="statistical-significance">Statistical Significance<a class="anchor" aria-label="anchor" href="#statistical-significance"></a>
</h3>
<p>Check the p-value: - <strong>p &lt; 0.05</strong>: Correlation is
statistically significant - <strong>p ≥ 0.05</strong>: Could be due to
chance</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example with interpretation</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check structure and extract values properly</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">correlations</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">correlations</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">p_value</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">p_value</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">estimate</span> <span class="op">&lt;-</span> <span class="va">result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">correlation</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">p_value</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="va">p_value</span> <span class="op">&lt;</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Age and income are significantly correlated (r ="</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">estimate</span>, <span class="fl">3</span><span class="op">)</span>, <span class="st">", p ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">p_value</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">")\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"No significant correlation between age and income\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; No significant correlation between age and income</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="correlation-causation">Correlation ≠ Causation<a class="anchor" aria-label="anchor" href="#correlation-causation"></a>
</h3>
<p>Important reminders: - Correlation doesn’t imply causation - Third
variables might explain the relationship - Direction of causality is
unknown</p>
</div>
</div>
<div class="section level2">
<h2 id="visualizing-correlations">Visualizing Correlations<a class="anchor" aria-label="anchor" href="#visualizing-correlations"></a>
</h2>
<div class="section level3">
<h3 id="correlation-matrix">Correlation Matrix<a class="anchor" aria-label="anchor" href="#correlation-matrix"></a>
</h3>
<p>When examining multiple variables:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate correlations among multiple variables</span></span>
<span><span class="va">cor_matrix</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, <span class="va">life_satisfaction</span>,</span>
<span>              <span class="va">trust_government</span>, <span class="va">trust_media</span>, <span class="va">trust_science</span>,</span>
<span>              weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cor_matrix</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                       age  income life_satisfaction trust_government</span></span>
<span><span class="co">#&gt; age                 1.000  -0.005            -0.029            0.005</span></span>
<span><span class="co">#&gt; income             -0.005   1.000             0.450           -0.001</span></span>
<span><span class="co">#&gt; life_satisfaction  -0.029   0.450             1.000            0.011</span></span>
<span><span class="co">#&gt; trust_government    0.005  -0.001             0.011            1.000</span></span>
<span><span class="co">#&gt; trust_media         0.005  -0.011             0.020            0.012</span></span>
<span><span class="co">#&gt; trust_science       0.003  -0.024            -0.019            0.031</span></span>
<span><span class="co">#&gt;                   trust_media trust_science</span></span>
<span><span class="co">#&gt; age                     0.005         0.003</span></span>
<span><span class="co">#&gt; income                 -0.011        -0.024</span></span>
<span><span class="co">#&gt; life_satisfaction       0.020        -0.019</span></span>
<span><span class="co">#&gt; trust_government        0.012         0.031</span></span>
<span><span class="co">#&gt; trust_media             1.000         0.024</span></span>
<span><span class="co">#&gt; trust_science           0.024         1.000</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Significance Matrix (p-values):</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt;                       age  income life_satisfaction trust_government</span></span>
<span><span class="co">#&gt; age                0.0000  0.8276            0.1496           0.8037</span></span>
<span><span class="co">#&gt; income             0.8276  0.0000            0.0000           0.9755</span></span>
<span><span class="co">#&gt; life_satisfaction  0.1496  0.0000            0.0000           0.6045</span></span>
<span><span class="co">#&gt; trust_government   0.8037  0.9755            0.6045           0.0000</span></span>
<span><span class="co">#&gt; trust_media        0.8202  0.6292            0.3299           0.5823</span></span>
<span><span class="co">#&gt; trust_science      0.9021  0.2698            0.3708           0.1452</span></span>
<span><span class="co">#&gt;                   trust_media trust_science</span></span>
<span><span class="co">#&gt; age                    0.8202        0.9021</span></span>
<span><span class="co">#&gt; income                 0.6292        0.2698</span></span>
<span><span class="co">#&gt; life_satisfaction      0.3299        0.3708</span></span>
<span><span class="co">#&gt; trust_government       0.5823        0.1452</span></span>
<span><span class="co">#&gt; trust_media            0.0000        0.2586</span></span>
<span><span class="co">#&gt; trust_science          0.2586        0.0000</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                     age income life_satisfaction trust_government trust_media</span></span>
<span><span class="co">#&gt; age                2516   2201              2437             2371        2382</span></span>
<span><span class="co">#&gt; income             2201   2201              2130             2076        2090</span></span>
<span><span class="co">#&gt; life_satisfaction  2437   2130              2437             2296        2305</span></span>
<span><span class="co">#&gt; trust_government   2371   2076              2296             2371        2242</span></span>
<span><span class="co">#&gt; trust_media        2382   2090              2305             2242        2382</span></span>
<span><span class="co">#&gt; trust_science      2414   2112              2336             2271        2286</span></span>
<span><span class="co">#&gt;                   trust_science</span></span>
<span><span class="co">#&gt; age                        2414</span></span>
<span><span class="co">#&gt; income                     2112</span></span>
<span><span class="co">#&gt; life_satisfaction          2336</span></span>
<span><span class="co">#&gt; trust_government           2271</span></span>
<span><span class="co">#&gt; trust_media                2286</span></span>
<span><span class="co">#&gt; trust_science              2414</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pairwise Results:</span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt;                         Variable_Pair      r r_squared p_value           CI_95</span></span>
<span><span class="co">#&gt;                          age × income -0.005     0.000  0.8276 [-0.046, 0.037]</span></span>
<span><span class="co">#&gt;               age × life_satisfaction -0.029     0.001  0.1496 [-0.069, 0.011]</span></span>
<span><span class="co">#&gt;                age × trust_government  0.005     0.000  0.8037 [-0.035, 0.045]</span></span>
<span><span class="co">#&gt;                     age × trust_media  0.005     0.000  0.8202 [-0.036, 0.045]</span></span>
<span><span class="co">#&gt;                   age × trust_science  0.003     0.000  0.9021 [-0.037, 0.042]</span></span>
<span><span class="co">#&gt;            income × life_satisfaction  0.450     0.203  0.0000  [0.416, 0.483]</span></span>
<span><span class="co">#&gt;             income × trust_government -0.001     0.000  0.9755 [-0.044, 0.042]</span></span>
<span><span class="co">#&gt;                  income × trust_media -0.011     0.000  0.6292 [-0.053, 0.032]</span></span>
<span><span class="co">#&gt;                income × trust_science -0.024     0.001  0.2698 [-0.067, 0.019]</span></span>
<span><span class="co">#&gt;  life_satisfaction × trust_government  0.011     0.000  0.6045 [-0.030, 0.052]</span></span>
<span><span class="co">#&gt;       life_satisfaction × trust_media  0.020     0.000  0.3299 [-0.021, 0.061]</span></span>
<span><span class="co">#&gt;     life_satisfaction × trust_science -0.019     0.000  0.3708 [-0.059, 0.022]</span></span>
<span><span class="co">#&gt;        trust_government × trust_media  0.012     0.000  0.5823 [-0.030, 0.053]</span></span>
<span><span class="co">#&gt;      trust_government × trust_science  0.031     0.001  0.1452 [-0.011, 0.072]</span></span>
<span><span class="co">#&gt;           trust_media × trust_science  0.024     0.001  0.2586 [-0.017, 0.065]</span></span>
<span><span class="co">#&gt;     n sig</span></span>
<span><span class="co">#&gt;  2201    </span></span>
<span><span class="co">#&gt;  2437    </span></span>
<span><span class="co">#&gt;  2371    </span></span>
<span><span class="co">#&gt;  2382    </span></span>
<span><span class="co">#&gt;  2414    </span></span>
<span><span class="co">#&gt;  2130 ***</span></span>
<span><span class="co">#&gt;  2076    </span></span>
<span><span class="co">#&gt;  2090    </span></span>
<span><span class="co">#&gt;  2112    </span></span>
<span><span class="co">#&gt;  2296    </span></span>
<span><span class="co">#&gt;  2305    </span></span>
<span><span class="co">#&gt;  2336    </span></span>
<span><span class="co">#&gt;  2242    </span></span>
<span><span class="co">#&gt;  2271    </span></span>
<span><span class="co">#&gt;  2286    </span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="grouped-correlations">Grouped Correlations<a class="anchor" aria-label="anchor" href="#grouped-correlations"></a>
</h3>
<p>Compare correlations across groups:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># How does age-income correlation vary by region?</span></span>
<span><span class="va">regional_cors</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">regional_cors</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: region = East</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = 0.050</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.002</span></span>
<span><span class="co">#&gt;   Sample size: n = 449</span></span>
<span><span class="co">#&gt;   95% CI: [-0.043, 0.142]</span></span>
<span><span class="co">#&gt;   p-value: 0.2931</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: region = West</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.019</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 1751</span></span>
<span><span class="co">#&gt;   95% CI: [-0.066, 0.028]</span></span>
<span><span class="co">#&gt;   p-value: 0.4267</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="choosing-the-right-method">Choosing the Right Method<a class="anchor" aria-label="anchor" href="#choosing-the-right-method"></a>
</h2>
<div class="section level3">
<h3 id="decision-tree">Decision Tree<a class="anchor" aria-label="anchor" href="#decision-tree"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Are both variables continuous?</strong>
<ul>
<li>Yes → Consider Pearson</li>
<li>No → Go to step 2</li>
</ul>
</li>
<li>
<strong>Are variables ordinal or ranked?</strong>
<ul>
<li>Yes → Use Spearman or Kendall</li>
<li>No → Correlation may not be appropriate</li>
</ul>
</li>
<li>
<strong>Is the relationship linear?</strong>
<ul>
<li>Yes → Use Pearson</li>
<li>No, but monotonic → Use Spearman</li>
<li>Many ties → Use Kendall</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="comparison-example">Comparison Example<a class="anchor" aria-label="anchor" href="#comparison-example"></a>
</h3>
<p>Let’s compare all three methods:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pearson correlation</span></span>
<span><span class="va">pearson_result</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">life_satisfaction</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Spearman correlation</span></span>
<span><span class="va">spearman_result</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/spearman_rho.html">spearman_rho</a></span><span class="op">(</span><span class="va">life_satisfaction</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Kendall correlation</span></span>
<span><span class="va">kendall_result</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/kendall_tau.html">kendall_tau</a></span><span class="op">(</span><span class="va">life_satisfaction</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare results</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  Method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Pearson"</span>, <span class="st">"Spearman"</span>, <span class="st">"Kendall"</span><span class="op">)</span>,</span>
<span>  Correlation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pearson_result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">correlation</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                  <span class="va">spearman_result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">correlation</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                  <span class="va">kendall_result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">correlation</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  P_Value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">pearson_result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">p_value</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>              <span class="va">spearman_result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">p_value</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>              <span class="va">kendall_result</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">p_value</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">)</span></span>
<span><span class="co">#&gt;     Method Correlation       P_Value</span></span>
<span><span class="co">#&gt; 1  Pearson   0.4501535 8.997507e-107</span></span>
<span><span class="co">#&gt; 2 Spearman   0.4501535 2.322944e-113</span></span>
<span><span class="co">#&gt; 3  Kendall   0.4501535 5.179415e-130</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="common-patterns-in-survey-data">Common Patterns in Survey Data<a class="anchor" aria-label="anchor" href="#common-patterns-in-survey-data"></a>
</h2>
<div class="section level3">
<h3 id="age-and-attitudes">Age and Attitudes<a class="anchor" aria-label="anchor" href="#age-and-attitudes"></a>
</h3>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># How age relates to various attitudes</span></span>
<span><span class="va">age_correlations</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">political_orientation</span>, <span class="va">environmental_concern</span>,</span>
<span>              <span class="va">life_satisfaction</span>, <span class="va">trust_government</span>,</span>
<span>              weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">age_correlations</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                           age political_orientation environmental_concern</span></span>
<span><span class="co">#&gt; age                     1.000                -0.029                 0.024</span></span>
<span><span class="co">#&gt; political_orientation  -0.029                 1.000                -0.584</span></span>
<span><span class="co">#&gt; environmental_concern   0.024                -0.584                 1.000</span></span>
<span><span class="co">#&gt; life_satisfaction      -0.029                -0.004                -0.003</span></span>
<span><span class="co">#&gt; trust_government        0.005                -0.057                 0.064</span></span>
<span><span class="co">#&gt;                       life_satisfaction trust_government</span></span>
<span><span class="co">#&gt; age                              -0.029            0.005</span></span>
<span><span class="co">#&gt; political_orientation            -0.004           -0.057</span></span>
<span><span class="co">#&gt; environmental_concern            -0.003            0.064</span></span>
<span><span class="co">#&gt; life_satisfaction                 1.000            0.011</span></span>
<span><span class="co">#&gt; trust_government                  0.011            1.000</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Significance Matrix (p-values):</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt;                           age political_orientation environmental_concern</span></span>
<span><span class="co">#&gt; age                    0.0000                0.1678                0.2435</span></span>
<span><span class="co">#&gt; political_orientation  0.1678                0.0000                0.0000</span></span>
<span><span class="co">#&gt; environmental_concern  0.2435                0.0000                0.0000</span></span>
<span><span class="co">#&gt; life_satisfaction      0.1496                0.8361                0.8658</span></span>
<span><span class="co">#&gt; trust_government       0.8037                0.0076                0.0021</span></span>
<span><span class="co">#&gt;                       life_satisfaction trust_government</span></span>
<span><span class="co">#&gt; age                              0.1496           0.8037</span></span>
<span><span class="co">#&gt; political_orientation            0.8361           0.0076</span></span>
<span><span class="co">#&gt; environmental_concern            0.8658           0.0021</span></span>
<span><span class="co">#&gt; life_satisfaction                0.0000           0.6045</span></span>
<span><span class="co">#&gt; trust_government                 0.6045           0.0000</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                         age political_orientation environmental_concern</span></span>
<span><span class="co">#&gt; age                    2516                  2312                  2416</span></span>
<span><span class="co">#&gt; political_orientation  2312                  2312                  2221</span></span>
<span><span class="co">#&gt; environmental_concern  2416                  2221                  2416</span></span>
<span><span class="co">#&gt; life_satisfaction      2437                  2241                  2340</span></span>
<span><span class="co">#&gt; trust_government       2371                  2182                  2276</span></span>
<span><span class="co">#&gt;                       life_satisfaction trust_government</span></span>
<span><span class="co">#&gt; age                                2437             2371</span></span>
<span><span class="co">#&gt; political_orientation              2241             2182</span></span>
<span><span class="co">#&gt; environmental_concern              2340             2276</span></span>
<span><span class="co">#&gt; life_satisfaction                  2437             2296</span></span>
<span><span class="co">#&gt; trust_government                   2296             2371</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pairwise Results:</span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt;                                  Variable_Pair      r r_squared p_value</span></span>
<span><span class="co">#&gt;                    age × political_orientation -0.029     0.001  0.1678</span></span>
<span><span class="co">#&gt;                    age × environmental_concern  0.024     0.001  0.2435</span></span>
<span><span class="co">#&gt;                        age × life_satisfaction -0.029     0.001  0.1496</span></span>
<span><span class="co">#&gt;                         age × trust_government  0.005     0.000  0.8037</span></span>
<span><span class="co">#&gt;  political_orientation × environmental_concern -0.584     0.341  0.0000</span></span>
<span><span class="co">#&gt;      political_orientation × life_satisfaction -0.004     0.000  0.8361</span></span>
<span><span class="co">#&gt;       political_orientation × trust_government -0.057     0.003  0.0076</span></span>
<span><span class="co">#&gt;      environmental_concern × life_satisfaction -0.003     0.000  0.8658</span></span>
<span><span class="co">#&gt;       environmental_concern × trust_government  0.064     0.004  0.0021</span></span>
<span><span class="co">#&gt;           life_satisfaction × trust_government  0.011     0.000  0.6045</span></span>
<span><span class="co">#&gt;             CI_95    n sig</span></span>
<span><span class="co">#&gt;   [-0.069, 0.012] 2312    </span></span>
<span><span class="co">#&gt;   [-0.016, 0.064] 2416    </span></span>
<span><span class="co">#&gt;   [-0.069, 0.011] 2437    </span></span>
<span><span class="co">#&gt;   [-0.035, 0.045] 2371    </span></span>
<span><span class="co">#&gt;  [-0.611, -0.556] 2221 ***</span></span>
<span><span class="co">#&gt;   [-0.046, 0.037] 2241    </span></span>
<span><span class="co">#&gt;  [-0.099, -0.015] 2182  **</span></span>
<span><span class="co">#&gt;   [-0.044, 0.037] 2340    </span></span>
<span><span class="co">#&gt;    [0.023, 0.105] 2276  **</span></span>
<span><span class="co">#&gt;   [-0.030, 0.052] 2296    </span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="income-effects">Income Effects<a class="anchor" aria-label="anchor" href="#income-effects"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Income's relationship with satisfaction and trust</span></span>
<span><span class="va">income_correlations</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">income</span>, <span class="va">life_satisfaction</span>, <span class="va">trust_government</span>,</span>
<span>              <span class="va">trust_media</span>, <span class="va">trust_science</span>,</span>
<span>              weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">income_correlations</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                    income life_satisfaction trust_government trust_media</span></span>
<span><span class="co">#&gt; income              1.000             0.450           -0.001      -0.011</span></span>
<span><span class="co">#&gt; life_satisfaction   0.450             1.000            0.011       0.020</span></span>
<span><span class="co">#&gt; trust_government   -0.001             0.011            1.000       0.012</span></span>
<span><span class="co">#&gt; trust_media        -0.011             0.020            0.012       1.000</span></span>
<span><span class="co">#&gt; trust_science      -0.024            -0.019            0.031       0.024</span></span>
<span><span class="co">#&gt;                   trust_science</span></span>
<span><span class="co">#&gt; income                   -0.024</span></span>
<span><span class="co">#&gt; life_satisfaction        -0.019</span></span>
<span><span class="co">#&gt; trust_government          0.031</span></span>
<span><span class="co">#&gt; trust_media               0.024</span></span>
<span><span class="co">#&gt; trust_science             1.000</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Significance Matrix (p-values):</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt;                    income life_satisfaction trust_government trust_media</span></span>
<span><span class="co">#&gt; income             0.0000            0.0000           0.9755      0.6292</span></span>
<span><span class="co">#&gt; life_satisfaction  0.0000            0.0000           0.6045      0.3299</span></span>
<span><span class="co">#&gt; trust_government   0.9755            0.6045           0.0000      0.5823</span></span>
<span><span class="co">#&gt; trust_media        0.6292            0.3299           0.5823      0.0000</span></span>
<span><span class="co">#&gt; trust_science      0.2698            0.3708           0.1452      0.2586</span></span>
<span><span class="co">#&gt;                   trust_science</span></span>
<span><span class="co">#&gt; income                   0.2698</span></span>
<span><span class="co">#&gt; life_satisfaction        0.3708</span></span>
<span><span class="co">#&gt; trust_government         0.1452</span></span>
<span><span class="co">#&gt; trust_media              0.2586</span></span>
<span><span class="co">#&gt; trust_science            0.0000</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                   income life_satisfaction trust_government trust_media</span></span>
<span><span class="co">#&gt; income              2201              2130             2076        2090</span></span>
<span><span class="co">#&gt; life_satisfaction   2130              2437             2296        2305</span></span>
<span><span class="co">#&gt; trust_government    2076              2296             2371        2242</span></span>
<span><span class="co">#&gt; trust_media         2090              2305             2242        2382</span></span>
<span><span class="co">#&gt; trust_science       2112              2336             2271        2286</span></span>
<span><span class="co">#&gt;                   trust_science</span></span>
<span><span class="co">#&gt; income                     2112</span></span>
<span><span class="co">#&gt; life_satisfaction          2336</span></span>
<span><span class="co">#&gt; trust_government           2271</span></span>
<span><span class="co">#&gt; trust_media                2286</span></span>
<span><span class="co">#&gt; trust_science              2414</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pairwise Results:</span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt;                         Variable_Pair      r r_squared p_value           CI_95</span></span>
<span><span class="co">#&gt;            income × life_satisfaction  0.450     0.203  0.0000  [0.416, 0.483]</span></span>
<span><span class="co">#&gt;             income × trust_government -0.001     0.000  0.9755 [-0.044, 0.042]</span></span>
<span><span class="co">#&gt;                  income × trust_media -0.011     0.000  0.6292 [-0.053, 0.032]</span></span>
<span><span class="co">#&gt;                income × trust_science -0.024     0.001  0.2698 [-0.067, 0.019]</span></span>
<span><span class="co">#&gt;  life_satisfaction × trust_government  0.011     0.000  0.6045 [-0.030, 0.052]</span></span>
<span><span class="co">#&gt;       life_satisfaction × trust_media  0.020     0.000  0.3299 [-0.021, 0.061]</span></span>
<span><span class="co">#&gt;     life_satisfaction × trust_science -0.019     0.000  0.3708 [-0.059, 0.022]</span></span>
<span><span class="co">#&gt;        trust_government × trust_media  0.012     0.000  0.5823 [-0.030, 0.053]</span></span>
<span><span class="co">#&gt;      trust_government × trust_science  0.031     0.001  0.1452 [-0.011, 0.072]</span></span>
<span><span class="co">#&gt;           trust_media × trust_science  0.024     0.001  0.2586 [-0.017, 0.065]</span></span>
<span><span class="co">#&gt;     n sig</span></span>
<span><span class="co">#&gt;  2130 ***</span></span>
<span><span class="co">#&gt;  2076    </span></span>
<span><span class="co">#&gt;  2090    </span></span>
<span><span class="co">#&gt;  2112    </span></span>
<span><span class="co">#&gt;  2296    </span></span>
<span><span class="co">#&gt;  2305    </span></span>
<span><span class="co">#&gt;  2336    </span></span>
<span><span class="co">#&gt;  2242    </span></span>
<span><span class="co">#&gt;  2271    </span></span>
<span><span class="co">#&gt;  2286    </span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="advanced-topics">Advanced Topics<a class="anchor" aria-label="anchor" href="#advanced-topics"></a>
</h2>
<div class="section level3">
<h3 id="partial-correlation">Partial Correlation<a class="anchor" aria-label="anchor" href="#partial-correlation"></a>
</h3>
<p>When you want to control for a third variable:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Note: mariposa focuses on bivariate correlations</span></span>
<span><span class="co"># For partial correlations, combine with regression approaches</span></span>
<span></span>
<span><span class="co"># Example: Age-income correlation might be confounded by education</span></span>
<span><span class="co"># First, check bivariate correlations</span></span>
<span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">education</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: education = Basic Secondary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.013</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 741</span></span>
<span><span class="co">#&gt;   95% CI: [-0.085, 0.059]</span></span>
<span><span class="co">#&gt;   p-value: 0.7146</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: education = Intermediate Secondary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = 0.049</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.002</span></span>
<span><span class="co">#&gt;   Sample size: n = 558</span></span>
<span><span class="co">#&gt;   95% CI: [-0.035, 0.131]</span></span>
<span><span class="co">#&gt;   p-value: 0.2521</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: education = Academic Secondary</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.057</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.003</span></span>
<span><span class="co">#&gt;   Sample size: n = 558</span></span>
<span><span class="co">#&gt;   95% CI: [-0.140, 0.026]</span></span>
<span><span class="co">#&gt;   p-value: 0.1762</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: education = University</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = 0.020</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 343</span></span>
<span><span class="co">#&gt;   95% CI: [-0.086, 0.125]</span></span>
<span><span class="co">#&gt;   p-value: 0.7157</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="non-linear-relationships">Non-Linear Relationships<a class="anchor" aria-label="anchor" href="#non-linear-relationships"></a>
</h3>
<p>If correlation is weak but you suspect a relationship:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check for non-linear patterns</span></span>
<span><span class="co"># Low correlation doesn't mean no relationship</span></span>
<span></span>
<span><span class="co"># Example: Life satisfaction might have U-shaped relationship with age</span></span>
<span><span class="va">young</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&lt;</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="va">middle</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">30</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;</span> <span class="fl">60</span><span class="op">)</span></span>
<span><span class="va">older</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">60</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Correlation in young adults:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Correlation in young adults:</span></span>
<span><span class="va">young</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">life_satisfaction</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × life_satisfaction ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.033</span></span>
<span><span class="co">#&gt;   Effect size: r² = 0.001</span></span>
<span><span class="co">#&gt;   Sample size: n = 298</span></span>
<span><span class="co">#&gt;   95% CI: [-0.146, 0.081]</span></span>
<span><span class="co">#&gt;   p-value: 0.5704</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCorrelation in middle-aged:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation in middle-aged:</span></span>
<span><span class="va">middle</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">life_satisfaction</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × life_satisfaction ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = 0.001</span></span>
<span><span class="co">#&gt;   Effect size: r² = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 1387</span></span>
<span><span class="co">#&gt;   95% CI: [-0.052, 0.053]</span></span>
<span><span class="co">#&gt;   p-value: 0.9835</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\nCorrelation in older adults:\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation in older adults:</span></span>
<span><span class="va">older</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">life_satisfaction</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × life_satisfaction ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.058</span></span>
<span><span class="co">#&gt;   Effect size: r² = 0.003</span></span>
<span><span class="co">#&gt;   Sample size: n = 752</span></span>
<span><span class="co">#&gt;   95% CI: [-0.129, 0.013]</span></span>
<span><span class="co">#&gt;   p-value: 0.1092</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="complete-example">Complete Example<a class="anchor" aria-label="anchor" href="#complete-example"></a>
</h2>
<p>Here’s a comprehensive correlation analysis workflow:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1. Explore all correlations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"=== Correlation Matrix ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; === Correlation Matrix ===</span></span>
<span><span class="va">cor_matrix</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, <span class="va">life_satisfaction</span>,</span>
<span>              <span class="va">political_orientation</span>, <span class="va">environmental_concern</span>,</span>
<span>              weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cor_matrix</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                           age  income life_satisfaction political_orientation</span></span>
<span><span class="co">#&gt; age                     1.000  -0.005            -0.029                -0.029</span></span>
<span><span class="co">#&gt; income                 -0.005   1.000             0.450                -0.034</span></span>
<span><span class="co">#&gt; life_satisfaction      -0.029   0.450             1.000                -0.004</span></span>
<span><span class="co">#&gt; political_orientation  -0.029  -0.034            -0.004                 1.000</span></span>
<span><span class="co">#&gt; environmental_concern   0.024   0.015            -0.003                -0.584</span></span>
<span><span class="co">#&gt;                       environmental_concern</span></span>
<span><span class="co">#&gt; age                                   0.024</span></span>
<span><span class="co">#&gt; income                                0.015</span></span>
<span><span class="co">#&gt; life_satisfaction                    -0.003</span></span>
<span><span class="co">#&gt; political_orientation                -0.584</span></span>
<span><span class="co">#&gt; environmental_concern                 1.000</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Significance Matrix (p-values):</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt;                           age  income life_satisfaction political_orientation</span></span>
<span><span class="co">#&gt; age                    0.0000  0.8276            0.1496                0.1678</span></span>
<span><span class="co">#&gt; income                 0.8276  0.0000            0.0000                0.1255</span></span>
<span><span class="co">#&gt; life_satisfaction      0.1496  0.0000            0.0000                0.8361</span></span>
<span><span class="co">#&gt; political_orientation  0.1678  0.1255            0.8361                0.0000</span></span>
<span><span class="co">#&gt; environmental_concern  0.2435  0.5026            0.8658                0.0000</span></span>
<span><span class="co">#&gt;                       environmental_concern</span></span>
<span><span class="co">#&gt; age                                  0.2435</span></span>
<span><span class="co">#&gt; income                               0.5026</span></span>
<span><span class="co">#&gt; life_satisfaction                    0.8658</span></span>
<span><span class="co">#&gt; political_orientation                0.0000</span></span>
<span><span class="co">#&gt; environmental_concern                0.0000</span></span>
<span><span class="co">#&gt; ------------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample Size Matrix:</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt;                         age income life_satisfaction political_orientation</span></span>
<span><span class="co">#&gt; age                    2516   2201              2437                  2312</span></span>
<span><span class="co">#&gt; income                 2201   2201              2130                  2020</span></span>
<span><span class="co">#&gt; life_satisfaction      2437   2130              2437                  2241</span></span>
<span><span class="co">#&gt; political_orientation  2312   2020              2241                  2312</span></span>
<span><span class="co">#&gt; environmental_concern  2416   2112              2340                  2221</span></span>
<span><span class="co">#&gt;                       environmental_concern</span></span>
<span><span class="co">#&gt; age                                    2416</span></span>
<span><span class="co">#&gt; income                                 2112</span></span>
<span><span class="co">#&gt; life_satisfaction                      2340</span></span>
<span><span class="co">#&gt; political_orientation                  2221</span></span>
<span><span class="co">#&gt; environmental_concern                  2416</span></span>
<span><span class="co">#&gt; ------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Pairwise Results:</span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt;                                  Variable_Pair      r r_squared p_value</span></span>
<span><span class="co">#&gt;                                   age × income -0.005     0.000  0.8276</span></span>
<span><span class="co">#&gt;                        age × life_satisfaction -0.029     0.001  0.1496</span></span>
<span><span class="co">#&gt;                    age × political_orientation -0.029     0.001  0.1678</span></span>
<span><span class="co">#&gt;                    age × environmental_concern  0.024     0.001  0.2435</span></span>
<span><span class="co">#&gt;                     income × life_satisfaction  0.450     0.203  0.0000</span></span>
<span><span class="co">#&gt;                 income × political_orientation -0.034     0.001  0.1255</span></span>
<span><span class="co">#&gt;                 income × environmental_concern  0.015     0.000  0.5026</span></span>
<span><span class="co">#&gt;      life_satisfaction × political_orientation -0.004     0.000  0.8361</span></span>
<span><span class="co">#&gt;      life_satisfaction × environmental_concern -0.003     0.000  0.8658</span></span>
<span><span class="co">#&gt;  political_orientation × environmental_concern -0.584     0.341  0.0000</span></span>
<span><span class="co">#&gt;             CI_95    n sig</span></span>
<span><span class="co">#&gt;   [-0.046, 0.037] 2201    </span></span>
<span><span class="co">#&gt;   [-0.069, 0.011] 2437    </span></span>
<span><span class="co">#&gt;   [-0.069, 0.012] 2312    </span></span>
<span><span class="co">#&gt;   [-0.016, 0.064] 2416    </span></span>
<span><span class="co">#&gt;    [0.416, 0.483] 2130 ***</span></span>
<span><span class="co">#&gt;   [-0.078, 0.010] 2020    </span></span>
<span><span class="co">#&gt;   [-0.028, 0.057] 2112    </span></span>
<span><span class="co">#&gt;   [-0.046, 0.037] 2241    </span></span>
<span><span class="co">#&gt;   [-0.044, 0.037] 2340    </span></span>
<span><span class="co">#&gt;  [-0.611, -0.556] 2221 ***</span></span>
<span><span class="co">#&gt; ---------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span>
<span></span>
<span><span class="co"># 2. Focus on significant correlations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Significant Correlations (p &lt; 0.05) ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Significant Correlations (p &lt; 0.05) ===</span></span>
<span><span class="va">significant_cors</span> <span class="op">&lt;-</span> <span class="va">cor_matrix</span><span class="op">$</span><span class="va">correlations</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">p_value</span> <span class="op">&lt;</span> <span class="fl">0.05</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">correlation</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">significant_cors</span><span class="op">)</span></span>
<span><span class="co">#&gt;                    var1                  var2 correlation       p_value</span></span>
<span><span class="co">#&gt; 1 political_orientation environmental_concern  -0.5843752 1.558234e-203</span></span>
<span><span class="co">#&gt; 2                income     life_satisfaction   0.4501535 8.997507e-107</span></span>
<span><span class="co">#&gt;   conf_int_lower conf_int_upper    n sig r_squared</span></span>
<span><span class="co">#&gt; 1     -0.6111168     -0.5563011 2221 *** 0.3414944</span></span>
<span><span class="co">#&gt; 2      0.4156264      0.4833852 2130 *** 0.2026382</span></span>
<span></span>
<span><span class="co"># 3. Compare methods for key relationship</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Method Comparison: Income vs Life Satisfaction ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Method Comparison: Income vs Life Satisfaction ===</span></span>
<span><span class="va">pearson</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">income</span>, <span class="va">life_satisfaction</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="va">spearman</span> <span class="op">&lt;-</span> <span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/spearman_rho.html">spearman_rho</a></span><span class="op">(</span><span class="va">income</span>, <span class="va">life_satisfaction</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">pearson</span><span class="op">$</span><span class="va">correlations</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">pearson</span><span class="op">$</span><span class="va">correlations</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">corr_val</span> <span class="op">&lt;-</span> <span class="va">pearson</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">correlation</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">p_val</span> <span class="op">&lt;-</span> <span class="va">pearson</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">p_value</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">corr_val</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">corr_val</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">p_val</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">p_val</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Pearson r ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">corr_val</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>        <span class="st">"(p ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">p_val</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">")\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; Pearson r = 0.45 (p = 0 )</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">spearman</span><span class="op">$</span><span class="va">correlations</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">spearman</span><span class="op">$</span><span class="va">correlations</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">corr_val</span> <span class="op">&lt;-</span> <span class="va">spearman</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">correlation</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="va">p_val</span> <span class="op">&lt;-</span> <span class="va">spearman</span><span class="op">$</span><span class="va">correlations</span><span class="op">$</span><span class="va">p_value</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">corr_val</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">corr_val</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">p_val</span><span class="op">)</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">p_val</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Spearman rho ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">corr_val</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>        <span class="st">"(p ="</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">p_val</span>, <span class="fl">4</span><span class="op">)</span>, <span class="st">")\n"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># 4. Group differences</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"\n=== Regional Differences in Age-Income Correlation ===\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; === Regional Differences in Age-Income Correlation ===</span></span>
<span><span class="va">survey_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">region</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/pearson_cor.html">pearson_cor</a></span><span class="op">(</span><span class="va">age</span>, <span class="va">income</span>, weights <span class="op">=</span> <span class="va">sampling_weight</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weighted Pearson Correlation </span></span>
<span><span class="co">#&gt; ----------------------------- </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Weights variable: sampling_weight</span></span>
<span><span class="co">#&gt; Missing data handling: pairwise deletion</span></span>
<span><span class="co">#&gt; Confidence level: 95.0%</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: region = East</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = 0.050</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.002</span></span>
<span><span class="co">#&gt;   Sample size: n = 449</span></span>
<span><span class="co">#&gt;   95% CI: [-0.043, 0.142]</span></span>
<span><span class="co">#&gt;   p-value: 0.2931</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Group: region = West</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; --- age × income ---</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Correlation: r = -0.019</span></span>
<span><span class="co">#&gt;   Effect size: r-squared = 0.000</span></span>
<span><span class="co">#&gt;   Sample size: n = 1751</span></span>
<span><span class="co">#&gt;   95% CI: [-0.066, 0.028]</span></span>
<span><span class="co">#&gt;   p-value: 0.4267</span></span>
<span><span class="co">#&gt;   Significance: ns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Correlation Strength Interpretation:</span></span>
<span><span class="co">#&gt;   |r| &lt; 0.30:        Weak correlation</span></span>
<span><span class="co">#&gt;   0.30 ≤ |r| &lt; 0.70: Moderate correlation</span></span>
<span><span class="co">#&gt;   |r| ≥ 0.70:        Strong correlation</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; r² represents the proportion of variance explained</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reporting-results">Reporting Results<a class="anchor" aria-label="anchor" href="#reporting-results"></a>
</h2>
<div class="section level3">
<h3 id="professional-format">Professional Format<a class="anchor" aria-label="anchor" href="#professional-format"></a>
</h3>
<p>“There was a moderate positive correlation between age and income (r
= 0.34, 95% CI [0.29, 0.39], p &lt; .001), indicating that older
respondents tended to report higher incomes.”</p>
</div>
<div class="section level3">
<h3 id="what-to-include">What to Include<a class="anchor" aria-label="anchor" href="#what-to-include"></a>
</h3>
<ul>
<li>Correlation coefficient (r, ρ, or τ)</li>
<li>Confidence interval</li>
<li>p-value</li>
<li>Sample size or effective N</li>
<li>Whether weights were used</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>Key points about correlations:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Choose the right method</strong>: Pearson for linear,
Spearman for monotonic, Kendall for ordinal</li>
<li>
<strong>Use weights</strong>: Ensure representativeness with survey
weights</li>
<li>
<strong>Check significance</strong>: But remember effect size
matters too</li>
<li>
<strong>Avoid over-interpretation</strong>: Correlation ≠
causation</li>
<li>
<strong>Consider context</strong>: Domain knowledge helps interpret
strength</li>
</ol>
<p>mariposa makes correlation analysis straightforward while ensuring
proper handling of survey weights!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed with ❤️ for survey researchers</p>
</div>

<div class="pkgdown-footer-right">
  <p>Built with <a href="https://pkgdown.r-lib.org/index.html" class="external-link">pkgdown</a></p>
</div>

    </footer>
</div>





  </body>
</html>
